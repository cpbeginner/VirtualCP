@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg: #f4f7f2;
    --ink: #0f1b1f;
    --muted: #4b5a60;
    --card: #ffffff;
    --stroke: #d7e1e0;
    --primary: #1f6f8b;
    --primary-ink: #ecf9ff;
    --secondary: #f2e8d8;
    --accent: #f6ae2d;
    --danger: #d1495b;
    --warning: #f6ae2d;
    --success: #1b8a5a;
    --shadow: rgba(15, 27, 31, 0.12);

    --bg-blob-1: rgba(31, 111, 139, 0.16);
    --bg-blob-2: rgba(246, 174, 45, 0.18);
    --bg-grid: rgba(31, 111, 139, 0.05);
  }

  :root[data-theme="sunset"] {
    --bg: #fff6ed;
    --ink: #23130a;
    --muted: #6b4d3a;
    --card: #ffffff;
    --stroke: #f1d2c2;
    --primary: #c2410c;
    --primary-ink: #fff7ed;
    --secondary: #ffe6c7;
    --accent: #f59e0b;
    --danger: #dc2626;
    --warning: #f59e0b;
    --success: #16a34a;
    --shadow: rgba(25, 10, 4, 0.14);

    --bg-blob-1: rgba(194, 65, 12, 0.18);
    --bg-blob-2: rgba(245, 158, 11, 0.18);
    --bg-grid: rgba(194, 65, 12, 0.06);
  }

  :root[data-theme="midnight"] {
    --bg: #0b1220;
    --ink: #eaf2ff;
    --muted: #a8b6c8;
    --card: rgba(12, 18, 32, 0.92);
    --stroke: rgba(148, 163, 184, 0.22);
    --primary: #38bdf8;
    --primary-ink: #07131a;
    --secondary: rgba(148, 163, 184, 0.14);
    --accent: #a78bfa;
    --danger: #fb7185;
    --warning: #fbbf24;
    --success: #34d399;
    --shadow: rgba(0, 0, 0, 0.45);

    --bg-blob-1: rgba(56, 189, 248, 0.22);
    --bg-blob-2: rgba(167, 139, 250, 0.18);
    --bg-grid: rgba(148, 163, 184, 0.08);
  }

  body {
    font-family: "Instrument Sans", sans-serif;
    color: var(--ink);
    background-color: var(--bg);
    background-image:
      radial-gradient(600px 380px at 10% 0%, var(--bg-blob-1) 0%, transparent 60%),
      radial-gradient(520px 420px at 95% 10%, var(--bg-blob-2) 0%, transparent 55%),
      linear-gradient(transparent 23px, var(--bg-grid) 24px),
      linear-gradient(90deg, transparent 23px, var(--bg-grid) 24px);
    background-size: auto, auto, 24px 24px, 24px 24px;
    min-height: 100vh;
  }

  #root {
    min-height: 100vh;
  }
}

@layer components {
  .page-enter {
    animation: fadeSlide 0.6s ease both;
  }

  .stagger > * {
    animation: riseIn 0.5s ease both;
  }

  .stagger > *:nth-child(2) { animation-delay: 0.05s; }
  .stagger > *:nth-child(3) { animation-delay: 0.1s; }
  .stagger > *:nth-child(4) { animation-delay: 0.15s; }
  .stagger > *:nth-child(5) { animation-delay: 0.2s; }
  .stagger > *:nth-child(6) { animation-delay: 0.25s; }

  .story-gradient {
    background: radial-gradient(1200px 900px at 20% 20%, rgba(99, 102, 241, 0.45), transparent 60%),
      radial-gradient(900px 700px at 80% 30%, rgba(236, 72, 153, 0.35), transparent 55%),
      radial-gradient(800px 700px at 40% 90%, rgba(34, 211, 238, 0.3), transparent 55%),
      linear-gradient(135deg, rgba(2, 6, 23, 1), rgba(15, 23, 42, 1));
    background-size: 200% 200%;
    animation: storyGradientDrift 14s ease infinite;
  }

  .story-blob {
    animation: storyBlobFloat 6s ease-in-out infinite;
  }

  .story-blob-slow {
    animation-duration: 10s;
  }

  .story-pop {
    animation: storyTextPop 0.6s cubic-bezier(0.2, 1, 0.2, 1) both;
  }

  .vc-toast-in {
    animation: toastIn 0.22s ease both;
  }

  .vc-score-flash {
    animation: scoreFlash 0.9s ease-out both;
  }

  .vc-countdown-pop {
    animation: countdownPop 0.42s cubic-bezier(0.2, 1, 0.2, 1) both;
  }

  .vc-chat-in {
    animation: riseIn 0.45s ease both;
  }

  .vc-fav-pulse {
    animation: favPulse 0.6s ease both;
  }

  .vc-ambient-gradient {
    background:
      radial-gradient(760px 520px at 12% 18%, rgba(31, 111, 139, 0.16), transparent 60%),
      radial-gradient(720px 560px at 86% 12%, rgba(246, 174, 45, 0.16), transparent 58%),
      radial-gradient(820px 620px at 40% 88%, rgba(209, 73, 91, 0.12), transparent 58%);
    opacity: 0.75;
    filter: blur(0px);
    animation: float 14s ease-in-out infinite;
  }

  :root[data-theme="sunset"] .vc-ambient-gradient {
    background:
      radial-gradient(760px 520px at 12% 18%, rgba(194, 65, 12, 0.18), transparent 60%),
      radial-gradient(720px 560px at 86% 12%, rgba(245, 158, 11, 0.18), transparent 58%),
      radial-gradient(820px 620px at 40% 88%, rgba(234, 88, 12, 0.12), transparent 58%);
  }

  :root[data-theme="midnight"] .vc-ambient-gradient {
    background:
      radial-gradient(760px 520px at 12% 18%, rgba(56, 189, 248, 0.22), transparent 60%),
      radial-gradient(720px 560px at 86% 12%, rgba(167, 139, 250, 0.18), transparent 58%),
      radial-gradient(820px 620px at 40% 88%, rgba(34, 211, 238, 0.12), transparent 58%);
    opacity: 0.65;
  }

  .vc-glow-cursor {
    background: radial-gradient(
      220px 220px at var(--vc-cursor-x, 50%) var(--vc-cursor-y, 50%),
      rgba(246, 174, 45, 0.16),
      transparent 62%
    );
    opacity: 0.9;
    transition: opacity 0.18s ease;
    animation: neonPulse 3.2s ease-in-out infinite;
  }

  :root[data-theme="midnight"] .vc-glow-cursor {
    background: radial-gradient(
      240px 240px at var(--vc-cursor-x, 50%) var(--vc-cursor-y, 50%),
      rgba(56, 189, 248, 0.16),
      transparent 62%
    );
  }

  .vc-shimmer-preview {
    position: relative;
    overflow: hidden;
  }

  .vc-shimmer::after {
    content: "";
    position: absolute;
    inset: -40% -40%;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.55) 45%,
      transparent 100%
    );
    transform: translateX(-60%);
    animation: shimmer 1.05s ease both;
    pointer-events: none;
  }

  :root[data-theme="midnight"] .vc-shimmer::after {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(234, 242, 255, 0.22) 45%,
      transparent 100%
    );
  }

  .vc-ring-animate .vc-ring-stroke {
    animation: ringSweep 1.1s ease both;
  }
}

@keyframes fadeSlide {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes riseIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes storyGradientDrift {
  0% { background-position: 0% 40%; }
  50% { background-position: 100% 60%; }
  100% { background-position: 0% 40%; }
}

@keyframes storyBlobFloat {
  0%, 100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    transform: translate3d(10px, -14px, 0) scale(1.05);
  }
}

@keyframes storyTextPop {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes toastIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scoreFlash {
  0% {
    background-color: rgba(246, 174, 45, 0.18);
  }
  100% {
    background-color: transparent;
  }
}

@keyframes countdownPop {
  from {
    opacity: 0;
    transform: scale(0.94);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes favPulse {
  0% {
    transform: scale(1);
  }
  45% {
    transform: scale(1.35);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-60%);
    opacity: 0;
  }
  20% {
    opacity: 0.9;
  }
  100% {
    transform: translateX(60%);
    opacity: 0;
  }
}

@keyframes float {
  0%, 100% {
    transform: translate3d(0, 0, 0);
  }
  50% {
    transform: translate3d(10px, -10px, 0);
  }
}

@keyframes neonPulse {
  0%, 100% {
    opacity: 0.85;
  }
  50% {
    opacity: 1;
  }
}

@keyframes confetti {
  0% {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(40px) rotate(180deg);
    opacity: 0;
  }
}

@keyframes ringSweep {
  0% {
    stroke-dashoffset: 289;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

@media (prefers-reduced-motion: reduce) {
  .story-gradient,
  .story-blob,
  .story-pop,
  .page-enter,
  .stagger > *,
  .vc-toast-in,
  .vc-score-flash,
  .vc-countdown-pop,
  .vc-chat-in,
  .vc-fav-pulse,
  .vc-ambient-gradient,
  .vc-glow-cursor,
  .vc-shimmer::after,
  .vc-ring-animate .vc-ring-stroke {
    animation: none !important;
    transition: none !important;
  }
}

:root[data-motion="off"] .story-gradient,
:root[data-motion="off"] .story-blob,
:root[data-motion="off"] .story-pop,
:root[data-motion="off"] .page-enter,
:root[data-motion="off"] .stagger > *,
:root[data-motion="off"] .vc-toast-in,
:root[data-motion="off"] .vc-score-flash,
:root[data-motion="off"] .vc-countdown-pop,
:root[data-motion="off"] .vc-chat-in,
:root[data-motion="off"] .vc-fav-pulse,
:root[data-motion="off"] .vc-ambient-gradient,
:root[data-motion="off"] .vc-glow-cursor,
:root[data-motion="off"] .vc-shimmer::after,
:root[data-motion="off"] .vc-ring-animate .vc-ring-stroke {
  animation: none !important;
  transition: none !important;
}
